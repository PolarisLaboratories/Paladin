extends ../layout

append head
    script(type='text/javascript').
        window.onload = function() {
            var element = document.getElementById("#{user.role}");
            element.setAttribute("selected", "");
        }
    script(src="/javascripts/form.js")

append body
    .container
        .panel.panel-default
            .panel-heading
                h3.panel-title Edit details
            .panel-body
                form(method="post").form-horizontal
                    if (message != "")
                        .alert.alert-success(role="alert") #{message}
                    h3 Personal details
                    .form-group
                        label(for="firstname").control-label.col-sm-2 First name:
                        .col-sm-10
                            input(type="text" name="firstname" value=user.firstname).form-control#firstname
                    .form-group
                        label(for="lastname").control-label.col-sm-2 Last name:
                        .col-sm-10
                            input(type="text" name="lastname" value=user.lastname).form-control#lastname
                    hr
                    h3 Account details
                    .form-group
                        label(for="username").control-label.col-sm-2 Username:
                        .col-sm-10
                            input(type="text" name="username" value=user.username).form-control#username
                    .form-group
                        label(for="role").control-label.col-sm-2 Role:
                        .col-sm-10
                            select.form-control#role(name="role")
                                option#Administrator Administrator
                                option#Teacher Teacher
                                option#Student Student
                    .text-center
                        button(type="submit").btn.btn-default Save
                form(method="post" action="/users/password/" + user._id data-alert='#password-alert').form-horizontal
                    hr
                    h3 Security
                    .alert#password-alert(role="alert" hidden)
                    .form-group
                        label(for="password").control-label.col-sm-2 Password:
                        .col-sm-10
                            input(type="password" name="password").form-control#password
                    .text-center
                        button(type="submit").btn.btn-default Change Password
