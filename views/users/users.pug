extends ../layout

append head
    script(type='text/javascript').
        window.onload = function() {
            $('#confirm-delete').on('show.bs.modal', function(e) {
                $(this).find('#delete-ok').attr('href', $(e.relatedTarget).data('href'));
            });
        };
        var users = !{JSON.stringify(users)};
    script(src='/javascripts/users.js')
    script(src='/javascripts/form.js')

append body
    .container
        .alert#users-alert(role="alert" hidden)
        .panel.panel-default
            .panel-heading
                h3.panel-title Users
            div(style="margin: 10px")
                .col-md-6
                    p#num-users #[strong #{users.length}] users in the database
                .col-md-6.text-right
                    a.btn.btn-success(role='button' href='/users/create')
                        span.glyphicon.glyphicon-plus
                        |  Add user
            table.table.table-bordered.table-hover#user-table
                thead
                    th ID
                    th Username
                    th First Name
                    th Last Name
                    th Roles
                    th Manage
        #confirm-delete.modal.fade(role='dialog')
            .modal-dialog
                .modal-content
                    .modal-header
                        button.close(type='button', data-dismiss='modal') Ã—
                        h4.modal-title Delete Confirmation
                    .modal-body
                        p Are you sure you want to delete this user? This action is irreversible.
                    .modal-footer
                        button.btn.btn-default(type='button', data-dismiss='modal') Cancel
                        a.btn.btn-danger.btn-ok#delete-ok Delete
